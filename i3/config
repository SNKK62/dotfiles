# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod1

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:monospace 8

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8

# Start XDG autostart .desktop files using dex. See also
# https://wiki.archlinux.org/index.php/XDG_Autostart
exec --no-startup-id dex --autostart --environment i3

# The combination of xss-lock, nm-applet and pactl is a popular choice, so
# they are included here as an example. Modify as you see fit.

# xss-lock grabs a logind suspend inhibit lock and will use i3lock to lock the
# screen before suspend. Use loginctl lock-session to lock your screen.
exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock --nofork

# NetworkManager is the most popular way to manage wireless networks on Linux,
# and nm-applet is a desktop environment-independent system tray GUI for it.
exec --no-startup-id nm-applet

# IME
exec --no-startup-id fcitx5

# Keyboard remap
exec --no-startup-id ~/.cargo/bin/xremap ~/.config/xremap/config.yml


# Wallpaper
exec --no-startup-id feh --bg-fill ~/.config/i3/wallpaper-beach.jpg

# Use pactl to adjust volume in PulseAudio.
set $refresh_i3status killall -SIGUSR1 i3status
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && $refresh_i3status
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && $refresh_i3status
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier Mod4+Control
bindsym --whole-window Mod4+Control+button2 kill
bindsym --whole-window Mod4+Control+button3 floating toggle
bindsym --whole-window Mod4+Control+button4 resize grow height 20 px or 20 ppt
bindsym --whole-window Mod4+Control+Shift+button4 resize grow width 20 px or 20 ppt
bindsym --whole-window Mod4+Control+button5 resize shrink height 20 px or 20 ppt
bindsym --whole-window Mod4+Control+Shift+button5 resize shrink width 20 px or 20 ppt

# start a terminal
bindsym Mod4+Control+Shift+Return exec i3-sensible-terminal
bindsym Mod4+Control+Return exec wezterm

# kill focused window
bindsym Mod4+Control+w kill

# screen lock
bindsym Mod4+Control+Escape exec ~/.config/i3/i3lock.sh

# polybar
exec_always --no-startup-id ~/.config/polybar/launch.sh

# notification
exec --no-startup-id dunst

# graphics optimization
exec --no-startup-id "picom -b"

# start dmenu (a program launcher)
# bindsym Mod4+space exec --no-startup-id dmenu_run
# A more modern dmenu replacement is rofi:
# bindcode $mod+40 exec "rofi -modi drun,run -show drun"
# There also is i3-dmenu-desktop which only displays applications shipping a
# .desktop file. It is a wrapper around dmenu, so you need that installed.
# bindcode $mod+40 exec --no-startup-id i3-dmenu-desktop
bindsym Mod4+space exec --no-startup-id "rofi -show drun"
bindsym Mod4+Shift+space exec --no-startup-id "rofi -show run"

# change focus
bindsym Mod4+Control+h focus left
bindsym Mod4+Control+j focus down
bindsym Mod4+Control+k focus up
bindsym Mod4+Control+l focus right
# change focus between tiling / floating windows
bindsym Mod4+Control+n focus mode_toggle

bindsym Mod4+Control+s split vertical
bindsym Mod4+Control+v split horizontal
bindsym Mod4+Control+p focus parent
bindsym Mod4+Control+c focus child

# move focused window
bindsym Mod4+Control+Shift+h move left
bindsym Mod4+Control+Shift+j move down
bindsym Mod4+Control+Shift+k move up
bindsym Mod4+Control+Shift+l move right

# enter fullscreen mode for the focused container
bindsym Mod4+Control+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
# bindsym $mod+s layout stacking
bindsym Mod4+Control+period layout tabbed
bindsym Mod4+Control+slash layout toggle split

set $ws1 "main1"
set $ws2 "main2"
set $ws3 "main3"
set $terminal "terminal"
set $browser "browser"
set $note "note"

# switch to workspace
bindsym Mod1+1 workspace $ws1
bindsym Mod1+2 workspace $ws2
bindsym Mod1+3 workspace $ws3
bindsym Mod1+t workspace $terminal
bindsym Mod1+b workspace $browser
bindsym Mod1+c workspace $note

# move focused container to workspace
bindsym Mod1+Shift+1 move container to workspace $ws1
bindsym Mod1+Shift+2 move container to workspace $ws2
bindsym Mod1+Shift+3 move container to workspace $ws3
bindsym Mod1+Shift+t move container to workspace $terminal
bindsym Mod1+Shift+b move container to workspace $browser
bindsym Mod1+Shift+c move container to workspace $note

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym Mod4+Control+r restart

# exit i3 (logs you out of your X session)
bindsym Mod4+Control+e exec --no-startup-id \
        "i3-nagbar -t warning -m 'Do you really want to exit i3?' -b 'Shutdown' 'systemctl poweroff' -b 'Reboot' 'systemctl reboot' -b 'Logout' 'i3-msg exit'"

set $exit_mode "Exit (P)PowerOff (R)Reboot (L)Logout"
bindsym Mod1+e mode $exit_mode
mode $exit_mode {
        bindsym Shift+p exec --no-startup-id systemctl poweroff
        bindsym Shift+r exec --no-startup-id systemctl reboot
        bindsym Shift+l exec --no-startup-id i3-msg exit
        bindsym Escape mode "default"
        bindsym Control+c mode "default"
        bindsym Return mode "default"
        bindsym Mod1+e mode "default"
}

bindsym Mod1+s mode "service"
mode "service" {
        # reload the configuration file
        bindsym Escape reload; mode "default"
        bindsym Control+c mode "default"
        bindsym Return mode "default"
        bindsym Mod1+s mode "default"

        bindsym s move workspace to output next; mode "default"
        # toggle tiling / floating
        bindsym f floating toggle; mode "default"
}

# floating by default
# for_window [class="Org.gnome.Nautilus"] floating enable, resize set 1024 780, move position center

bindsym Mod1+Shift+r mode "resize"
mode "resize" {
        bindsym h resize shrink width 40 px or 40 ppt
        bindsym j resize shrink height 40 px or 40 ppt
        bindsym k resize grow height 40 px or 40 ppt
        bindsym l resize grow width 40 px or 40 ppt

        bindsym Left resize shrink width 20 px or 20 ppt
        bindsym Down resize shrink height 20 px or 20 ppt
        bindsym Up resize grow height 20 px or 20 ppt
        bindsym Right resize grow width 20 px or 20 ppt

        bindsym Shift+h move left 40 px
        bindsym Shift+j move down 40 px
        bindsym Shift+k move up 40 px
        bindsym Shift+l move right 40 px

        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym Control+c mode "default"
        bindsym Mod1+Shift+r mode "default"
}

set $bg           #1C1E27
set $fg           #CACACC
set $darkred      #D95882
set $red          #E4436F
set $darkgreen    #68DDC4
set $green        #24E39D
set $darkyellow   #E8AEAA
set $yellow       #EDA685
set $darkblue     #64A4BF
set $blue         #2095B4
set $darkmagenta  #B382CF
set $darkcyan     #54AEB8
set $cyan         #00A5AF
set $darkwhite    #CACACC
set $white        #CACACA
set $darkgrey     #6C6F93

# class                     border      background      text        indicator       child_border
client.focused              $bg         $darkgrey       $fg         $yellow         $darkyellow
client.unfocused            $bg         $bg             $fg         $yellow         $bg

# disable auto focus
# focus_follows_mouse no

# for_window [class="^.*"] border pixel 2

# This is supported in later version
# gaps top 6
# gaps bottom 6
# gaps right 6
# gaps left 6
# gaps inner 6

# ステータスバーの色
set $background #2B303B
set $foreground #C0C5CE
set $lightred #BF616A
set $lightgreen #A3BE8C
set $lightyellow #EBCB8B
set $lightblue #8FA1B3
set $lightmagenta #B48EAD
set $lightcyan #96B5B4
set $lightwhite #C0C5CE
set $pink #FFB6C1
set $orange #F08080

bar {
    font pango:UDEV Gothic 35 11
    mode dock
    position top
    workspace_buttons yes
    strip_workspace_numbers yes
    binding_mode_indicator yes
    tray_padding 2
    colors {
        background $background
        focused_background $background
        statusline $lightred
        focused_statusline $lightred
        # border, bg, fg
        focused_workspace  $orange $orange $background
        active_workspace $background $background $foreground
        inactive_workspace $background $background $foreground
        urgent_workspace   $green $green $background
        binding_mode       $green $green $background
    }
    status_command ~/.local/bin/bumblebee-status \
    -m disk xrandr cpu memory pasink pasource datetime battery \
    -p datetime.format="%m/%d %H:%M" -t moonlight-powerline
}
